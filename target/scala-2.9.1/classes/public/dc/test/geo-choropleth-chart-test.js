require("./env");

var vows = require('vows');
var assert = require('assert');

var suite = vows.describe('Geo choropleth chart');

function buildChart(id) {
    var div = d3.select("body").append("div").attr("id", id);
    div.append("a").attr("class", "reset").style("display", "none");
    div.append("span").attr("class", "filter").style("display", "none");
    var chart = dc.geoChoroplethChart("#" + id);
    chart.dimension(stateDimension)
        .group(stateValueSumGroup)
        .width(990)
        .height(600)
        .dimension(stateDimension)
        .group(stateValueSumGroup)
        .colors(["#ccc", "#E2F2FF","#C4E4FF","#9ED2FF","#81C5FF","#6BBAFF","#51AEFF","#36A2FF","#1E96FF","#0089FF"])
        .colorDomain([0, 155])
        .overlayGeoJson(geoJson.features, "state", function(d) {
            return d.properties.name;
        })
        .overlayGeoJson(geoJson2.features, "county")
        .transitionDuration(0)
        .title(function(d) {
            return d.key + " : " + (d.value ? d.value : 0);
        });
    chart.render();
    return chart;
}


suite.addBatch({
    'creation': {
        topic: function () {
            return buildChart("choropleth-chart");
        },
        'should return not null': function (chart) {
            assert.isNotNull(chart);
        },
        'svg is created': function(chart) {
            assert.isNotEmpty(chart.selectAll("svg"));
        },
        'geo layer0 g is created': function(chart) {
            assert.isNotEmpty(chart.selectAll("g.layer0"));
        },
        'correct number of states should be generated': function(chart) {
            assert.equal(chart.selectAll("g.layer0 g.state")[0].length, 52);
        },
        'correct css class should be set [Alaska]': function(chart) {
            assert.equal(chart.selectAll("g.layer0 g.state")[0][1].getAttribute("class"), "state alaska");
        },
        'correct title should be set [Alaska]': function(chart) {
            assert.equal(chart.selectAll("g.layer0 g.state title")[0][1].innerHTML, "Alaska : 0");
        },
        'correct color filling should be set [Alaska]': function(chart) {
            assert.equal(chart.selectAll("g.layer0 g.state path")[0][1].getAttribute("fill"), "#ccc");
        },
        'correct state boundary should be rendered [Alaska]': function(chart) {
            assert.equal(chart.selectAll("g.layer0 g.state path")[0][1].getAttribute("d"), "M244.90878107260025,435.4451319537046L244.37332874147918,433.7977234467205L245.96276647932186,434.20530500734327L246.52691135177693,435.90311195035605L245.02629619735367,436.3370291223138ZM242.33216429159276,433.0858737472198L243.8622959244472,433.77836626837166L244.05528939527449,435.70693457290884L243.347510200478,435.33447634738474ZM231.90787247740442,426.0749915758713L233.09422259665985,425.3107371880524L233.80624218142432,425.4389180176251L234.25265684287436,426.9364801824189L233.2522401836658,427.7470781423942L231.84412012018637,427.2906199229054ZM228.97234945501262,428.3227772268246L231.41584284995278,427.66160925991744L232.79314001904396,429.2584978207246L236.0044995254613,430.3074689212526L237.35335452266852,431.22048601165346L237.87489324650886,432.24536189402403L238.5295214882739,432.20754347540884L239.22192865623512,433.53306715447343L240.77846431428583,434.47453629674106L241.434937721081,435.626757593429L241.89750910685058,434.9801109448825L242.58858885449143,435.8019761839087L244.3768282301625,439.4627538317893L244.35951608777415,440.4759585632415L242.74528669476666,441.0067323650373L241.4871513085727,439.3060318628239L241.01333796909913,439.702833856593L239.27636982708614,438.77305503145647L239.15095573933104,439.3907349480231L238.0105104441181,439.32254674272843L238.77602754293756,440.6786270161199L239.49328390344667,439.92978505219634L240.2968532826617,440.20486820359133L240.87313886687718,442.26818415475924L239.71718444011796,442.5205442094039L237.04322214992547,440.7372326989311L236.04913392584092,439.66491171067867L235.57700355442867,438.3071391564139L234.35742895501068,438.94952025036673L233.93319193000173,437.94534233719867L234.84927674940758,437.43224802062986L235.4245678942593,436.1257519236764L234.3293006831335,434.72172546878556L233.06246259406956,434.88647845762114L231.81001911318464,432.42433683026513L230.8601320078219,431.32954188126246L230.47008571315672,432.55248197225654L229.57579311723762,431.246045217974L230.08222564540355,430.2239506062453L228.74724514241296,428.8531972034918ZM231.41869390938973,436.32491641817865L232.7322184116098,436.52115138869055L233.11477478817605,435.4252983878073L233.98795627185385,435.49122965195437L233.84518248185296,437.23496962459495L232.4972717506592,437.30453386891304ZM224.97118354505022,423.3921435849816L223.82671925223772,422.7455027686566L224.4258189246165,421.7514189256491L227.64536878559068,421.46025125633906L228.88406865317117,420.8693771627851L230.54604335295656,422.28179401601045L232.82826221625396,423.04457630352414L233.1382827919206,424.2259840205881L232.52181844294753,425.18359806734014L231.21867250478883,425.43337172620915L230.6700336085357,426.4809329251806L229.32600386966178,426.5527270243529L228.22177178188724,427.51620686455715L227.00633354160178,425.34646050725877L226.50139302643075,423.8134299048749L225.52567183951982,424.15774913485865ZM225.6646900803356,428.2036038602444L224.62915100084618,427.75848209268185L223.1920066747748,426.48224195111715L222.60800178566245,425.29268516151535L223.0072537182769,424.44789920918794L223.91224795350678,424.7610324692153L223.6425221870389,423.69132028391226L226.4491860596918,424.58267831386536L227.36085213661136,426.19477056489677L226.7217374084767,426.7100781273143L227.04673702798155,428.81444349158284L227.794402196185,429.12623371716137L228.0710187930493,431.6230538121032L227.0474316700513,431.4859101130923L227.49634875765545,432.9157106763232L226.6803185814526,432.4432153521183L225.2488559725928,429.86356079086914ZM223.6527367016151,431.25306141666283L223.92474256871768,432.44363311387383L222.9293181940568,432.099362951278L219.21746517250233,428.562858036316L217.4587569540074,427.76850381582017L217.50042985959033,426.58063168416766L216.04909235147397,424.307755921165L213.8981815377843,422.85717709433385L214.55965239386612,420.3832513309558L215.50212884243504,420.94217857694525L216.98612570115947,421.10146700785094L218.14565380498667,420.765930889168L218.79089378557958,422.30380706166824L221.91824674543474,426.93447736108214ZM215.6761708138316,412.52376296088624L217.7105741264826,412.57185948194706L218.67276649076962,412.0550525655497L218.92216942270954,412.82328290077373L221.47708152198678,414.88142495535607L220.28823832892522,414.87433229213633L220.4059680547518,415.8830456203498L222.0781219715835,416.8113754393262L223.431880298073,419.11374561815103L222.58228849689806,420.21138281971656L222.55962623641614,421.21517740311043L221.46225007313095,423.71013245465303L220.89200653995022,423.87802883042735L219.9112624828292,422.1036336771556L219.83381629125577,420.83341436026177L218.9969218987264,419.2486733029422L217.55787968781667,417.47116323862343L217.2437202043003,416.3578223186104L215.80315696543875,413.8980448498006L214.6837479607678,413.04314031204024L213.72497136558454,411.1950264312635ZM213.14792922144576,423.5745486446362L213.8980707259367,423.28825054689486L215.3587848317767,424.75959825297355L215.48549250404005,426.12756923774566L214.39488530081948,426.852294071288L213.83284436493773,424.85181852823536ZM207.70521205421488,415.7909791818011L209.27644151104738,415.26202862240785L209.96195614094503,414.0166812731836L211.87717626781654,414.63681978392964L211.5842722022152,416.22939174228674L212.05281951876162,416.6039436680306L212.22686148509402,414.8716163799906L214.187815556689,414.6618613791551L215.59607093374768,415.3425859924793L215.79271462535596,417.49185615723184L216.30996991889788,417.47279216367076L217.92700304448064,419.8007776655407L216.70291566334947,420.7185962180614L213.3448914878427,419.619736008173L214.2581841250048,421.7330533577212L213.78295571655775,422.90132831697076L212.68886319560227,422.88784049862545L211.6042497543514,421.7614469667843L210.1696685221823,421.25655214678244L208.63646281712508,419.6799127959476L207.26179034935447,419.20714836297356L206.7420989833651,417.620722975308L207.25115377209198,416.8192476587052L206.97668809232886,415.3868994229514ZM146.5618483818927,411.3963834338522L144.91082853667746,414.41382209764214L144.93554667242404,415.46398416577654L143.31207552040348,416.4708965065616L143.3852581540869,414.8179446267784L144.95577011460813,412.82270251787793L145.77766917339395,410.78742504579975ZM143.36883990020328,407.967445648468L143.498638475463,410.16945875890633L143.18830374107705,412.5121576800066L142.04679533167882,411.9620874146006L142.41020976897403,409.2603928206129ZM123.77879247951185,308.94186623006914L124.23061687816184,309.315843394657L126.16268910931987,309.4043817582686L127.07943946862721,308.93580931591595L128.41791559293395,308.6641015949313L129.95294476904098,308.7459105762855L130.75830941375148,308.3428134132013L131.7720518492206,308.9869098554037L133.49711779129478,309.5837663490555L135.5904560336749,309.33125215537484L136.02337414240728,308.6490672783544L137.29910878650406,307.99313267396093L137.70313621959244,307.1393183682877L139.13812893462853,306.66382909906434L139.24360591375248,307.1603541199553L140.03973188212473,306.66599179741957L142.02831621415888,306.9613281596623L143.5797118257671,307.88781176702645L144.88446672942953,308.17391222915535L145.28698448672014,308.64806133402845L146.36385378037906,308.4636426285897L147.6160503768036,309.10513921342664L147.98222691749828,309.6464319265649L148.44355957710735,308.9836440482556L149.29252079832563,309.147365090243L176.85496477879184,402.84795538097114L179.41018032387052,402.9877018608193L179.44201819908437,402.01573895366244L182.2429557525562,402.54154116304466L183.17728777884406,400.49929507887356L186.1120534789883,399.3768993653662L186.44378648754218,402.23530754967453L187.50612028029562,402.91905490737383L189.5061425495421,403.23023710966845L190.36018996542958,404.5235523486562L197.25186063264678,408.0069992180958L199.22094248386423,411.0361951203279L199.81042102460586,409.78880567077454L201.45523701686494,407.42241700470714L202.673435452898,406.91536579236896L202.81109990269,405.51473060703637L202.097469862687,403.75326721502677L202.96836618454415,403.42990221112893L202.60175609808726,401.78480061213264L204.00039606019254,400.82801881144695L205.77187659792693,398.608498866598L208.90283115188527,400.04248804017243L209.23618526490893,401.51996184556845L210.32794844587315,402.697903626516L211.7310317136476,402.51089170368476L214.1746469825207,403.9459067355131L214.30370700413295,404.57682352169047L215.49731824125786,405.3959221620573L218.07712132478372,405.8270037749483L223.78756011700233,409.9766673605414L224.92207621031866,411.24310771333865L226.61942034491264,412.2653987072452L229.61372699347226,414.85047191031504L232.42468193491555,416.9412673252615L232.34098476928997,418.36161666218317L234.1762596360411,418.04876663299467L234.5279447978825,419.9062938140962L236.17623491964395,419.9858727823204L237.2224971707239,421.84648937943837L238.52350512772824,421.12991416870165L242.01945854608473,421.9234154327844L243.79772529833485,421.535292183799L245.0720546613624,422.07702527353854L245.99987677695387,421.95419985520977L246.67502562889075,422.77762911693407L248.4970656345092,422.2210592450237L249.56587162254652,423.1072678042674L249.80997860246006,425.6042619077256L250.7746384079187,427.30581965490677L252.9360910026682,429.8298123908345L252.69783941932258,430.83771419879105L252.66394059627098,434.100344687531L251.665031629816,436.9249194495941L250.66157331392475,436.19366100394376L250.0894321966965,436.84230803374675L248.65868476875144,435.1055858535426L248.41940959290028,434.20450077324574L247.36480074186844,433.4934971202496L248.1229816107982,431.8728620517212L247.59807229110845,431.6752959170058L246.9602595696093,433.5548631267385L245.89251226874867,433.0374215036107L245.3367611071132,433.86161382514257L242.13121565830227,432.7988052332738L241.85720860720352,430.15073497937897L240.797255169967,431.57408656687414L241.25537922907012,432.7525233346611L239.73218387132746,432.3647512384905L239.00589574184934,431.36851390511987L239.23386542506918,429.8212785753036L238.46069113069098,428.7202632769541L237.84719948067558,430.1867288025147L235.84125605503567,428.49813517959774L235.38101676185744,429.2012824363678L234.19056327736797,427.5901837610236L234.70375955230963,425.986525100809L235.6912716778117,425.5513597900353L234.77463107181282,424.2605501147031L234.48025307100224,422.1917536220444L233.6980193346227,422.6001300396894L231.33955185673273,421.7501370201386L229.34298326305898,420.359359215186L226.01257642774004,420.15340555329675L224.43937323438283,416.2613156256508L223.36301429839796,416.15199084896665L222.8937178484472,414.47785627081424L221.8168208292036,414.42891233170656L219.6189419129217,412.8481784622408L218.7965555927977,411.8799374131164L216.38327621130904,412.4259269931979L212.75362789275974,410.52695640603315L209.0599631864184,404.1860804431697L209.17376655522406,405.9331483671175L209.9360528917783,407.2423217007685L211.9782474177333,409.53339213260534L211.8968731810479,410.0598736691863L213.4279627711717,411.99298154955386L213.8576289041183,413.49342164547505L212.7503853523423,413.5568052173666L211.34085817311356,412.2530754149618L210.20363834739177,412.3837145298117L208.91282134399458,413.36935035470725L208.06293216019898,411.04530444995635L206.44195871525565,409.443128409069L205.8599871127284,410.3375720973205L201.91440849668749,409.4602376694632L201.85289396449915,410.1559738801624L203.83840683417995,410.1665102564577L205.80023198300847,411.2812579321185L206.34939599093713,411.13762336468903L207.0012072302766,412.36831547513066L208.2680900338219,413.6132576400557L206.8201700866398,415.13814048613875L205.57874640922643,414.98351386411065L206.0470507572263,416.34390050421035L204.31599941442585,415.8126669602504L203.59028204279642,415.2188962951299L202.74466858880527,415.5236225251136L199.71471693258184,414.40127173448775L197.3971253887653,413.25864027188925L196.87234379088505,412.28299009372387L195.40078768982733,411.084469541762L192.4170109157359,410.8767909926188L190.59224467239025,410.2073702332789L187.64155222109366,409.71213573332074L185.5794702999323,408.9777182803189L185.28505616815087,407.5615514183459L185.89226371840542,407.85265610448084L186.16383787788175,406.79991315238857L184.98820000981797,404.99879571589435L185.3212750503803,403.68468908941634L184.83753638678422,403.29496031705014L184.2683994411529,405.769069896359L182.11051764802693,407.9438704195543L178.871124198057,408.3758324736339L175.9076571248322,407.8594443319698L175.511922124722,406.8948659884485L174.364457704766,407.4608585206155L172.86886282975257,407.10310421758305L169.7978287183164,407.22763648170684L168.10358076051085,407.6194800339404L164.46453297277276,409.1518621254018L163.2046099081814,409.8816552161976L161.13193255176154,408.84778841400953L158.84310731818147,408.68371182231243L157.97050669561645,407.9420016638624L157.3704124684695,406.4856469635973L155.94018726647863,406.9329113235682L155.7501794466849,408.3929774820946L152.75983780390354,407.17010323405543L152.17633153382178,406.4721322697607L149.81657677721333,408.5042508850753L148.87532913003824,410.5209608016092L147.98781189432276,408.99775515830703L148.35646023753654,407.98264970524787L149.1750925260335,408.0494379355636L151.45687910991353,406.3328823733529L150.93502542762627,405.502610845337L149.85219941314642,406.20281516172486L149.13898490617197,405.11686326896546L148.0102542886055,405.1739354444029L146.3128526073358,402.4054302319128L146.05308011541229,403.2210294560945L144.60737546622642,403.9180683870766L144.04017430662927,403.6179910860173L143.70788408021477,404.67900570358853L141.73216175218818,404.7016922810332L141.8504486476628,405.7923243414348L140.61392045293604,406.31276480207305L139.9386398207136,406.0255867047063L140.02738945693486,404.02031602761156L139.4924862213593,404.17553504188L138.98153154865446,406.37212873614027L140.31174522047004,406.8357457671558L140.68873520262989,408.2887027172674L141.72499693167148,409.7382810827974L141.59107866665138,411.51865504578353L140.51380289225344,411.1283187967177L140.38710565804797,412.0282817540779L141.3974811206068,412.1975307145243L142.34239935739532,414.3662319620644L141.04584359237094,415.0687564293982L140.20527588179604,414.7502758769314L139.10290716018812,415.5856660857252L138.39499851724383,415.1816008120956L136.7980242139788,415.50910912855926L136.71276794384588,414.64784889646256L136.04636435999993,415.3414245587862L135.7992419106085,416.4901608974696L134.96514770790662,415.6336053169945L134.334566787342,417.13329775408494L134.80245283356538,417.70025437337193L133.7342109591787,418.6843937338188L132.6698179912267,418.9649171967251L132.40608606260022,420.1113129455746L131.3771600260465,421.25466796904163L130.52450138222537,421.0305745726103L129.79884085893366,422.29838165729603L129.07175620943207,422.343307050656L127.89450579518964,424.88903094203516L126.29411013344588,425.27768420986297L125.6754308710568,424.60396288958304L124.85088993856682,425.98688905577416L122.69784453999232,425.2685147908743L122.94444582151218,423.4406632226768L124.19181284560597,422.64702427757715L125.07003374777983,422.6508084307605L125.24013767525093,421.93221369490834L126.60695997075976,420.35796008029297L126.51059840300252,419.20915672782445L124.68434428731277,421.01724899175105L122.88027098252701,420.31641172328017L122.60273633736995,419.71257412870904L123.12893437459974,416.9784717286305L124.32815857651374,414.90995655607566L124.35212736861564,413.339237324551L124.73476783609928,412.9987100908029L124.68371955816696,411.3213316495156L123.72171839582846,409.58942502486127L125.37415544016062,408.6731172339104L128.30672260082434,405.58701689169095L129.25226179294106,406.49564345081114L130.31086375196173,406.6284357847369L131.65268118737796,405.31599472772206L129.76893974344577,404.14844971945513L128.95387142283693,403.1643956226847L127.66530335517359,403.4695482239186L126.66748046167694,403.0889292080898L126.45992393753089,403.5833311880345L125.0090230377773,404.5396348820436L124.49016540734004,406.06187871485065L122.97099027311205,406.60992242526606L121.55567782039813,408.47190396962225L121.5241333170811,409.57803340320766L120.34542500930908,410.3014514797541L120.21057126736605,411.5351741564525L119.40504054492587,412.3835512806297L119.2293857064009,414.5482958140952L117.63640715794953,416.1179182222771L118.6059127199023,417.11078727377935L118.0742920964335,418.79196284100726L116.45284742388708,419.2563923979506L116.5268088942138,421.33259205059994L115.05267178815141,422.236459529221L114.4786561002199,421.42592624774665L113.8594682876733,423.10625194727766L112.94235594387911,423.2517043486446L113.22392494417403,424.3815571202109L111.23043838462502,425.2581615100344L111.10078918985866,428.44779473204215L113.4867966100247,428.4040404000422L115.44473495570523,429.0814585838511L116.07672747724223,430.0591862228252L115.47677912651922,431.796620610041L114.30471022305437,432.95136611649275L113.1243311284357,433.11986851383693L113.08989379442482,434.0476666767708L112.3477378186945,434.46166854057464L112.80873540624093,435.5756236878105L112.15459844502232,437.3672004101396L110.54833619358284,439.1221487408334L109.55341718717582,439.20393145410185L108.6332740135995,439.85417837631223L107.6881210367398,439.8114545453903L107.00966009961655,440.49661968861835L107.28531381590096,441.34145670974283L105.95268445266484,441.89921978274305L105.76730831907923,443.1807160015864L104.76838515558696,442.44195486967703L103.89279899973592,444.97793829172366L102.13644239597848,444.91392495815506L102.33807997100473,446.2268883989065L101.27343920016222,445.9435889232699L100.56806686494406,446.5591390897154L100.66621284612059,448.33889711514166L99.63499759151644,451.1575359689422L97.75150540263039,451.5960324335031L96.24674623001432,452.92935139248203L96.02552047097554,453.62903478005023L94.9839349980436,452.6937306963419L93.38812285928731,455.3986230639746L92.8905392064952,454.6682888991951L91.95487187474288,454.9287627885345L91.78067235970173,456.4288598847285L90.81807737853096,457.03203722654894L89.64220821631967,456.83351843735926L88.75959682973232,458.3487977028901L90.39020150659358,458.7679344074326L88.71769595501428,462.14139044113244L83.66440047179269,463.31292336026996L82.2670899070764,466.25136471560165L81.90780554885623,465.6218645772132L82.09194529207994,463.78385635747844L81.09356497887973,463.50086590732826L79.83919151462636,464.1913206943953L79.64523429010659,464.9375017254266L77.66933938915761,466.1361934302777L76.81649987588953,467.5076922309876L76.56513916500955,466.52987260495576L76.03509952333657,467.6727785358239L74.87483076527884,466.91325990041L72.66859528494471,468.65762587041996L71.04089185684036,468.56666961596625L71.29934966725676,467.1948536199506L70.61679229994495,465.8587070937173L69.94191617667217,466.9328628458361L69.97764547787662,468.08191528550674L67.68982267551466,471.5185514111905L66.96327994001041,470.6345042274895L66.69001836218106,471.94549322088557L65.18742587315896,471.6628604843274L65.03560996365125,469.59054912248763L64.13960976486405,469.0963055943853L63.78293523948808,469.8283320326793L64.56427792517714,470.77811629990936L64.11410266703207,472.19548746648445L62.865912498538535,472.890040036533L62.01645240529106,471.24512481008765L60.90700460221844,471.0785460291959L60.67974057780411,471.699263870522L61.754202214453095,472.66856737140427L59.63818018422578,474.05908787933606L61.00643963273079,474.5281297454736L61.00700707835729,475.2169241716925L59.873665889362826,474.6450779928872L58.2450014456931,475.93795941207645L55.22961732237792,475.7061498056087L53.677686445985316,476.52664206691884L53.49970518367027,477.204234698566L51.713069915135804,477.8872586613594L50.46708501749015,477.5108520697786L50.17823780242984,475.53556371828637L51.48271732926277,474.9980517673119L52.60379980455416,472.7198014313628L53.858506123268754,472.7464721446938L56.6491544988709,471.36828857687146L58.81766749583432,471.4322158129953L59.56175522295075,472.964254102788L60.24156164818546,471.90745541529236L60.17310358316811,470.64058300387705L61.44431770168134,470.12772633518364L62.785233400829064,470.18820048386505L64.69127677789858,467.5101500706567L66.75658602320232,465.1155890422346L69.3993632424811,463.0136452114524L72.43755387912617,462.1081566295633L73.6797353485463,462.5897805226389L74.90712673598556,461.97608606653137L75.21614165399308,462.89883175309166L74.52742881870581,463.9233438919081L75.25808471701613,464.7366987763907L75.49847598061534,463.47641409664413L77.01063030145505,463.37610413417144L77.42322452949641,464.182854449312L78.35618789467479,464.47495066995447L78.39244860000083,463.499085612316L76.85593164308106,462.62841613363156L76.73242923581283,462.0531580480096L77.77319636112922,459.36115585119416L79.14469238859526,457.8156147475646L80.97874161470233,456.32153186266805L83.86917226022082,454.98154886752326L85.94677608036886,453.05808402054305L86.96081877898787,453.73063395466386L87.77003926787428,453.4275330998048L87.40186266089617,452.22766739681805L87.62844821794707,451.0733059468374L89.15713388104895,448.62402830019187L91.27516676937476,447.01314215550485L92.92760204387098,444.8881003094465L92.79600268239363,443.7416988653019L93.85707407048267,435.5282765182412L95.85001033315642,433.2575902528202L95.53783396204436,431.5430188842033L90.65008897854563,434.1975608745514L89.06655816232157,433.9530117610851L88.65525849000136,432.92692126166565L87.75624363537108,432.4869314577431L87.43633203351018,431.34237186063126L86.64931736565921,431.87594211720506L86.17759687275296,433.66875980929234L87.08262345851126,435.8968511672206L86.05310152897127,436.89386488715525L85.11939549285964,436.56293636194346L83.29060270892798,433.0160800698814L82.0649563551798,431.2410189594805L81.44554732523248,431.24405876818764L81.03642001278662,432.5692351711737L80.50385221768478,432.8005793809772L79.70489217316974,431.70730539648L78.7308788505604,431.5325105048429L78.29661731732175,429.7464183431161L75.39228860574606,431.7353334148765L72.76427030237369,433.13099790511467L72.5400321139266,433.93228696810297L70.4577615295518,435.09207937466476L69.47606273670709,433.9709704290349L70.43116320185658,432.73103625422584L70.18778446334628,429.7304579375105L69.60546215614754,426.5466843859601L70.97848104550735,425.2599978290242L69.95263722689211,422.58295264973964L69.0500259354013,421.05821636505414L68.3785949758085,418.84744530514655L67.30213246569586,417.8877410452683L66.94660820310749,419.77570192466277L65.58810621629033,420.12515638415607L63.38726044235002,421.23701382400367L60.77880472268528,421.6214793401493L59.379360807176056,421.4260354271555L58.21433078965692,420.7204821591819L58.1764512253683,419.0452110977388L57.18511293422007,418.4618689402363L55.727002064533025,416.05365775299805L54.40590256537564,415.4955825610733L53.027896329779935,412.84847972078705L54.17888421126176,411.78322078612166L54.56277714827783,409.6760927285842L53.72319309977572,410.0734739875665L53.715717307416654,408.744704449005L54.18695963228254,407.6842512577393L53.24598332180356,406.6284088561869L53.05280932310792,407.65244552103223L51.84711673874722,407.14859232516864L51.83303542967769,405.3564273540603L50.895658075281894,405.0443599185695L50.483947705296444,403.7942858049637L50.64430141623693,402.3060349618699L49.63216723764414,402.9077506043491L49.602058586997984,401.4598040800816L50.79561844691632,401.22155597625925L49.9977549071621,399.53108859295924L51.6747019329229,399.56556320240605L51.84408982985827,397.6161529409479L52.35789707384913,396.3319809374625L55.73874289729133,392.3914841315427L56.46333170890273,391.17675104421744L56.89192959650326,391.43892282895547L56.76056756707533,389.6413913223589L58.12006249630662,386.6830030578491L59.181770635794436,385.5452300536987L61.040179185143685,385.1452739156058L62.42446684120854,385.74470808029906L64.31530827405747,387.6877684603822L65.62115920033915,387.5199896620999L67.47922213640216,385.8156554367781L69.40009288954776,383.1832770625516L70.3282885853154,382.9261251353323L70.53685176160043,383.6226560250674L72.73597483979809,383.6819734472274L74.68955870751854,383.1466946429713L76.45814556079058,380.355773030873L76.46610574123197,379.6663114547681L75.64579479149715,377.0129297984873L75.5684602202564,375.46100891409424L74.28075693806723,373.7739263926484L73.81533853554485,372.3292459702574L75.13928522613483,372.7555860750935L76.41213397303049,371.5681145166435L76.49939301024996,370.4213220820176L74.92035864314327,368.275405079081L73.6941599165394,369.91584161470377L72.57723848795253,369.6029910811542L71.50127900424451,370.4925053863079L70.29404986251531,370.6851577622932L69.97879871907291,371.3063221839999L68.5688109808092,372.17452309860545L68.08873844043511,373.7069455662561L67.3692423904908,374.30965849937184L67.12590249798444,372.46052090945216L66.30633386616563,372.0218602676998L65.64705324744851,373.4276652325604L65.33460594407222,372.7228131326584L63.836568788292496,371.61087851244434L60.66324804733789,371.4793390752543L58.320588180595564,372.469089742813L57.44501369103084,372.5770057444188L55.652187489811666,371.74520414518446L52.23705477862194,370.63953062166655L51.3914234997178,369.9250375686447L51.07668603438157,368.8566204847931L51.5315642338167,367.4597962328375L50.41698506810593,366.13897829933495L50.78988626076402,364.8508253725978L51.6254976720063,364.2420872217406L51.5486895607133,362.5641155026187L50.33351604478091,362.441896512218L49.38159735258584,361.88144443204106L47.47133016842729,361.3261157677245L46.550733586425665,360.3551685365959L45.0945596040497,359.31578213052995L45.08569218813008,358.21819654861235L47.66694086975977,357.082000864628L50.954944431823655,355.02076581751476L53.20401243237815,353.8067958340077L54.333137220231905,354.71683669215133L55.54731613250918,354.99736207394915L55.923753786974686,353.88129699411377L55.19926703061445,353.64582877544257L55.21599487974162,352.6711028964761L58.265263939409564,351.3191606271165L61.62159718796544,350.35839629003186L63.38636517705962,350.355419652978L64.32252940895953,350.8107506668914L63.71963700383522,352.494023712106L63.83445749289939,353.7037053012797L63.41428488201878,354.53870256397533L63.9620483144934,355.94599083408565L65.13853108578262,355.7811294734153L66.59404932446098,356.08318543284224L68.30684208113931,355.87288307490115L68.77531975517138,356.40735035706757L69.89088296228265,356.5639592372379L70.88771085773307,356.0824860491838L72.1533075250214,356.6929835765662L73.44421964316095,354.43647200929223L74.3267089691382,354.3412549515848L74.92046056192137,354.8103313452773L75.24431358475285,353.50023916317974L73.57370969909313,352.83765641700364L71.94692228029379,353.31035972004054L72.15677838317036,351.60036173304854L70.95569474113861,349.7340786344859L69.61090318002881,349.11502833943683L69.26676865706511,347.444221615231L70.34245032376064,347.08431387154457L71.64563259793411,348.7841613023114L71.35492197601275,350.0898740476279L71.98655245829384,351.1380269693871L73.40029930586621,352.3760670493068L73.77338887803883,351.1266882931824L72.17252018857863,349.42830985594736L72.95439960798564,346.47874317867536L72.40609818537253,345.950098976248L70.79026826041346,346.5285204181934L69.15404996461021,346.2970053024336L68.92754120943138,345.77374925580636L68.07459494108026,346.25193497690736L64.70584642510534,344.8261140123344L64.71293494911697,343.51220673698316L63.86448102158233,340.5497143060026L63.118558491692376,339.4187701521121L61.88747931983238,338.4242054176644L59.463097376506354,335.7347091463204L58.35415747930853,334.6749332534498L57.18995255865456,334.3474037201608L55.58722256745152,332.48878377982965L53.97667317214221,331.36075125633175L53.925998116680525,331.0129593224449L55.24912071574057,330.62985213569385L55.9704203619242,329.1011815418123L56.30952738118711,325.9417994311851L59.664877763884235,326.46185420767017L63.80207296237137,326.0219658098969L64.89786872278846,325.52206466915004L66.66548477718966,324.0332557000543L68.37010032001055,321.68160223702955L68.80811403332623,319.26803245757947L69.56619477132227,317.2098074755088L70.9976271797372,315.5165739606743L71.62138248625351,314.24149382618305L73.34679504057625,312.2104511816848L73.58754174091023,312.7802811315762L74.96493698499845,312.9822240236397L76.9923796256535,311.946464861316L78.25876256751204,310.83371103506977L81.23400985839561,307.3529685561392L82.35046653159014,307.1760078005612L82.47138627292732,307.6800176855464L83.60433195235478,307.2722985775897L84.72434175569866,307.36462968613813L86.90870243290567,306.86106631952714L89.00424516974105,305.27392269214823L90.97426842801903,302.04885643037585L91.78735685237076,301.33617334204195L91.96689726934939,301.88695949478995L95.27070036608691,302.98000962232777L95.59610666019348,303.85637132818164L94.54931007091989,305.1042577808031L94.03714703470675,305.19204960257133L94.1514039918335,306.7588057162759L95.77062825279467,306.1486697651487L95.80924823670176,305.30267110339327L96.4984992092316,304.46769105118295L96.77846551351416,304.8971750578738L97.19762471891525,303.06823404189066L98.93864320048485,304.56157669798813L98.77136007562433,305.8131376727009L99.81481659085166,306.06433133318194L100.47292605104224,306.7398084140572L101.24973123726252,305.4868073523361L102.79287429482959,305.2838540346713L103.63176153473233,304.80510840203704L105.92443445029164,304.9544007114118L107.12115941986899,305.26911582867035L106.84199633760186,307.7323463677607L109.0409576952456,308.0928099223467L109.27209054938422,308.68737352268425L111.48694662581653,309.47937424739814L111.439363000797,308.9748509406142L112.83988670983774,308.1020452231583L114.27860982196684,307.9529110473079L114.37937715409228,308.5066040914496L115.22058444023068,308.438845708749L115.97224775744849,307.52826252180586L117.38150340980211,307.1933332525876L118.4377099515059,307.36380792851287L119.94766521015242,307.96651552182533L120.55657543504137,307.690619453454L121.66993346842581,308.6953754000248L122.1137704141031,308.15876984025283L123.02556700821347,308.3366102232574ZM118.95669800533585,438.669001688676L118.97538252893088,439.1298422883532L117.00602034440266,438.64058676021807L118.07783784422377,435.8114861176845L119.27755803368713,435.4518545585674L119.84038455291571,432.9009450364649L121.00539061234895,434.9706061041252L121.69425103884217,434.13877751237294L123.32438048169615,435.1635390020748L123.5228831105907,436.8202236281904L121.3613360517376,437.304304398561L120.48387282311185,438.1555271937465ZM113.81720444152782,444.3215709809134L115.27548630039249,442.7991280315556L113.81788154331616,442.64671849191177L113.67733258701233,441.44666719480574L114.78431494104889,440.53474637027574L115.68717061862705,441.02596556293406L115.92553576855173,442.2163655237383L116.33275463207187,441.36729769497134L116.18763431540124,439.589757138835L117.29524034363241,440.2880560661987L117.35971294844991,439.12501799212043L118.3358587339871,439.7180224493257L119.42270238338955,439.6025943350682L120.19856807156057,438.88160459477126L121.70774084618023,439.8124337669959L122.0526749558413,442.841254735643L123.79129905239148,442.4074423501812L122.86630102686516,444.5423261736912L120.63631866633253,443.98332531030854L121.57748658781739,445.2097351592004L121.08415172254044,446.36370634743145L119.92206804189047,445.96951479788584L120.1118140855896,448.0307970456899L118.47163050209792,448.7807662144445L118.0013069125045,449.6953541182038L116.86790460352056,448.9995083115709L115.96019716802098,451.2817301482879L115.10920840704787,451.5926749858708L114.26182227053036,452.65142864647845L113.70794129194546,450.33526267541396L112.51110866497609,451.70961021931004L112.38485606661979,450.97051259475074L111.14047650471576,450.32544787899724L110.87257411403588,448.2133011546095L109.66109425785332,447.4460503623477L110.10870685166354,444.9296434422555L112.2089440069378,443.1947334033789L113.59079760761372,443.1872135072139ZM111.41380022592773,454.3972544889685L110.38836934331549,456.6130021971185L109.98237747303564,456.2992461516752ZM105.56511196370865,461.97290331957004L106.50172762158988,462.0252246433963L106.3280809086565,464.2236688499187L104.76335491953488,464.03837039002366L104.4589964467774,463.30977040331095ZM80.65332301389044,469.5283980625784L80.29580120909456,471.7661643670445L78.44977377461629,473.5985631082172L79.34511472216518,470.79056205385547L79.96748196168578,471.0779313203757ZM76.90452039375856,468.71351948017525L78.01245674568962,468.72064573865305L77.97400307732762,469.86800710373143L76.85285851496894,471.1228405519017L75.87826915774986,470.2533780310365L75.24712283456545,471.0495164308817L74.91165443649155,469.09457572087433L75.24542764301592,468.4674925486221ZM66.44251510149046,472.4536337329117L66.54322710706977,473.3751579089818L65.83058285842202,473.92433112303246L65.3381111913204,472.93106748878506ZM68.79270071643757,381.60903223822777L68.06693794397843,382.617064948888L67.8737357224421,381.6892548969563ZM62.93575535483848,477.48370053384775L64.21926152661318,477.9373704677093L64.0520682543962,478.7910881101365L63.01859141592182,478.6917379328796ZM46.09973898931015,478.4328785503167L46.43468641923375,479.668051037663L45.453416778888,480.1031921338937L45.22592989006057,478.81881102015143ZM44.802735576342414,479.8173711872513L42.82285692768969,480.79137265991443L42.493591837018734,479.95585898308553L43.39072121849458,479.0023022744352ZM47.21568734898584,414.6498540021263L48.43440464247716,414.3600616738604L48.618869177453384,415.1287100354909L49.676470506874935,415.0508295690694L50.63130841000596,415.8277099250627L50.57464784306488,418.8275832440821L49.94907215086638,419.7561066732797L48.555507078384295,420.2103818302282L48.17518725860857,421.2162867884395L46.30904396356888,419.8835625075575L45.38954602522038,419.8507324135672L43.57707204288296,418.1596169095942L42.895135557031196,418.08685156723686L41.854211432123286,417.1042571964978L41.61170098250989,415.6868595575921L42.21396869603424,415.406359307652L44.095434725879535,415.9564423366028L45.110304381759235,414.9617762827197L46.07903522929136,414.9436791137296L46.574423682411265,414.24050371920606ZM40.775460567402185,480.94449325967906L41.708546042881295,481.83858089066763L39.46371982939578,483.57813968753425L39.46376464225172,483.92330473153015L42.20193513448807,482.74717133439754L42.16200932080156,483.54848190120106L41.02211994820056,484.41928626057785L39.26633680314337,484.8816618456286L39.00044949368436,485.8330458625389L37.0584715625407,486.670921825981L35.45151473351402,486.5582680208642L34.28908258952298,487.4098299071587L32.21190484791468,488.038927949315L31.259654130477443,487.0063604991543L33.46189130189371,486.16603757570584L34.08945620131834,486.4090671594397L35.753615698199724,485.6698945679677L35.490718937389715,484.6053697677912L36.48690349487869,483.6183191494876L37.753200971263,484.26865759463635L37.9587443240936,483.59919406078495L36.56297536957031,483.22340175266663L35.86593880884583,482.4002615405898L36.673442538533614,481.2197837674632L39.135363404611205,480.7256844397109L39.49782618578115,482.20064221568407ZM24.81101930038634,488.09948360933373L27.457637149371685,486.4250289238172L27.701904120039856,485.59090865680815L28.739788369778815,484.7409730677289L30.2192930756365,484.4615293182696L30.903810565519592,485.06262402217857L31.013488091374086,486.45872732478045L28.173910780561847,487.6110311523102L26.46273914120534,489.58463111888113L25.19955553637714,490.16987388836117ZM18.43317054959106,489.9751042473203L18.558063049359525,491.03363563508657L16.93192967945682,490.8488678087309L16.862669473754337,490.14462096447085ZM22.82405122807436,444.8185835732139L21.90802607003892,445.6655666734438L21.905764710182652,444.67599059260283ZM12.341076773204918,491.11344218393873L12.599861475035013,492.1393133003671L11.315614795399398,492.6253002173756L11.309607271072522,491.5820492118258ZM25.93606351401082,376.15875438392436L29.30340751804937,378.31424894271066L31.623488732851484,377.35275861371554L32.55796289417044,377.61642921655414L33.29752858993685,378.48674294601926L33.33333153048365,379.7713526266627L35.07767425628521,380.7292606058077L35.57002065957229,381.4397676622932L37.944453521094786,382.0632136064542L39.33501486511588,382.7134950921777L38.338444381395846,384.14712469269585L37.207765384234825,383.64508550196416L35.91470596512503,383.754269304642L35.17680361367697,384.3456662764859L34.362855524101334,385.7964632281621L33.67391936246259,384.24146507825657L32.77121955700361,383.11671034488825L31.819128899341003,382.8535563835316L31.52984562672843,381.70255420614524L29.41825325715768,379.9646544712208L28.341653725073037,379.7266734595815L26.4687549360969,380.63026603232004L25.314299020248434,379.7843863924231L25.00858207851934,378.4446745125339ZM0.6832226140746798,492.3134085890533L0.5638964311258121,493.5114938743751L-0.6909631728934755,493.5047709126884L-0.2551385204128138,492.54166175479895ZM-7.343541079186579,493.27981042832755L-6.604858685057337,493.8992008147017L-4.235212132097004,494.32228033883524L-4.1982720922369765,494.67897998421745L-7.113384544788303,494.61024682072514ZM-11.441146947694122,491.0033457741571L-11.255496635179455,489.99160734003385L-10.277672926599024,489.7955621852112L-9.222104117196778,491.07449046410454L-9.908051851561197,491.9203399261848L-10.654803237454828,491.70072342987567L-10.642677358754426,492.81332639583184L-11.876817916905438,492.66148333730604L-14.683900644145126,493.20667514966675L-16.060243840925665,492.542379109339L-15.46774046064266,491.8580728795498L-13.939818888480204,492.32089294548064ZM-25.978216687361666,492.1460721804474L-24.79714858821609,492.266871640378L-25.115791004149912,493.5399089223125L-26.527632720653443,493.0074134728345L-28.710844564036364,494.03786275039766L-28.88682269901048,491.87055496854674L-28.11346988840181,492.01218671048L-27.624865187001078,490.5470372336159L-26.682015092287628,490.7303533557939L-26.96480916563705,491.8361349565482ZM-30.039522844298702,490.0934066508927L-29.482762074121737,490.77113370010494L-30.415313812755628,492.35478691257356L-31.51405521108184,492.5948418490405L-31.269758155095516,491.5382066473642ZM-36.18430045430439,488.71764151518886L-35.13785473735737,489.06831034045877L-34.51058971427028,490.54360289592887L-35.93816487574577,491.6883269272745ZM-320.71634113332044,199.01979084307993L-321.0172612924965,200.34968898787577L-322.03197323454276,200.74338879876137L-323.39083424288845,198.50677944082673L-322.24200075064425,196.40814393424122L-321.4764121083512,196.17436898282176Z");
        },
        'correct css class should be set [California]': function(chart) {
            assert.equal(chart.selectAll("g.layer0 g.state")[0][4].getAttribute("class"), "state california");
        },
        'correct css class should be set [District of Columbia]': function(chart) {
            assert.equal(chart.selectAll("g.layer0 g.state")[0][8].getAttribute("class"), "state district_of_columbia");
        },
        'correct title should be set [California]': function(chart) {
            assert.equal(chart.selectAll("g.layer0 g.state title")[0][4].innerHTML, "California : 154");
        },
        'correct color should be set [California]': function(chart) {
            assert.equal(chart.selectAll("g.layer0 g.state path")[0][4].getAttribute("fill"), "#0089FF");
        },
        'correct state boundary should be rendered [California]': function(chart) {
            assert.equal(chart.selectAll("g.layer0 g.state path")[0][4].getAttribute("d"), "M158.86749327536552,136.57366253041238L169.52167318895334,139.31963086623898L186.19551014223396,143.8653009575992L199.15490385060792,146.99465425182456L192.2385362157263,176.651451043796L187.05464324980534,198.32826169422236L200.48783880999207,217.63660120195215L213.48995630613223,236.32410714790296L223.96848858783574,251.34992479174568L231.63624864801588,262.3695348585253L245.40165831056862,282.2495598143262L245.01556926091882,284.43296914257354L246.81464151790698,287.68563109641L247.94295916820315,292.57788879372094L250.29387365892035,295.5255789239701L248.20173523954165,297.5116760443086L245.76079578294045,298.2611969236919L243.52522270730822,300.9987492948678L243.35283864885866,305.1724336054047L242.51431242596587,307.66435706785876L239.19377214738782,309.6188895797653L238.98897469033386,316.22796129434414L240.9328214351707,316.6685073437932L241.15333727561176,320.0273941815819L240.10090058893857,321.4050125535952L237.1501167227987,321.567129197748L217.81618230029926,319.65294425696914L202.04033014274722,318.09589048968337L200.77723598497573,315.48218480793435L201.43403390846208,311.88657536651743L201.21417691290952,307.4218652214571L199.8154287683181,303.9879494431257L196.26295534375987,298.91689801055895L191.4463426181942,293.8528094858064L190.14268732344516,294.6547338804488L188.12604924245858,293.52681486214885L188.8034744040483,291.90055244649835L187.10481084314512,287.8810253013744L183.63703016153994,287.9033282659451L178.38058338274743,284.0564618982815L178.00908069881905,281.7985099566087L174.69769148699123,278.3704760581802L170.25618828800395,277.4365003963832L166.8679169214119,275.4496100304908L162.117333105974,274.80913260437825L160.23105140624904,271.97329433801843L161.92047035865937,267.3250055534397L161.27122407075393,266.37375284281984L162.61866486179383,263.1294584137318L159.62415971754388,259.71833245873466L160.32546846101968,256.2164151257986L159.02274144168638,255.6968642868094L157.52049811722304,252.14490541943135L156.11542797435885,251.09868751768593L155.91243827162674,249.05916432933495L152.4841790556901,240.7297497550809L150.5689397862028,238.04859435747306L151.4703314514116,232.40171979858414L152.3806859202512,233.13375594631313L154.17444413076373,230.10627553657216L153.03460450272132,226.62559339721565L150.59440690950595,226.3942227937965L148.2284412435606,222.88545143368754L147.69717654472538,220.4510692342654L148.4550677196413,218.45455910856825L147.64108859357492,215.34576349861666L148.82302555496062,210.86566913678317L151.2831620054618,211.51212438240808L151.91261122007654,204.99108705340197L150.66056257722158,205.36041894992164L149.6322658908984,208.38365880317332L146.86029733498947,208.34863212195455L144.38296937637767,205.18863484893336L144.9571504514007,201.04488992572868L143.80562208687257,197.33478851913344L141.69260703297857,194.65969031915552L140.87745589484786,192.03492596719317L138.24489647040554,186.60263027690237L139.24416249981272,185.47755865590432L139.05257872072264,179.31449848844582L140.70688341610975,176.36934888725688L140.9034113113686,171.3162560237522L138.92030848004458,165.75088285973206L136.4530301931576,162.24503392999546L136.70028929481128,159.00622474279857L141.9878200433326,152.4889917563015L143.31462792572376,150.15919033729676L143.24514751784716,148.0366539879332L145.8487714106543,143.26445568149748L146.13061774898813,138.3400815091127L145.08288442186466,136.84266601428163L146.67634556546568,133.29105306047563Z");
        },
        'correct css class should be set [Colorado]': function(chart) {
            assert.equal(chart.selectAll("g.layer0 g.state")[0][5].getAttribute("class"), "state colorado");
        },
        'correct title should be set [Colorado]': function(chart) {
            assert.equal(chart.selectAll("g.layer0 g.state title")[0][5].innerHTML, "Colorado : 22");
        },
        'correct color should be set [Colorado]': function(chart) {
            assert.equal(chart.selectAll("g.layer0 g.state path")[0][5].getAttribute("fill"), "#E2F2FF");
        },
        'correct state boundary should be rendered [Colorado]': function(chart) {
            assert.equal(chart.selectAll("g.layer0 g.state path")[0][5].getAttribute("d"), "M350.6558279386644,190.32747464076306L379.1417564600954,193.0766804542834L400.9842673748395,194.56648090187278L427.0604847196623,195.95426209201185L426.3080372819032,213.58455343256023L424.19976347803527,266.52898141920514L410.9873725131713,265.80322990122784L392.5653612831207,264.7996860372182L357.74429102638516,262.00822687585145L350.15212938381376,261.17850787049804L327.9017732133032,258.77384873712674L330.28515677736027,238.35229231520617L330.287518840727,236.40886491926926L332.0973188488354,221.5578841713215L335.99623347504,188.80082044863843Z");
        },
        'geo layer1 g is created': function(chart) {
            assert.isNotEmpty(chart.selectAll("g.layer1"));
        },
        'correct number of counties should be generated': function(chart) {
            assert.equal(chart.selectAll("g.layer1 g.county")[0].length, 5);
        },
        'correct css class should be set [county]': function(chart) {
            assert.equal(chart.selectAll("g.layer1 g.county")[0][1].getAttribute("class"), "county");
        },
        'correct title should be set [county]': function(chart) {
            assert.equal(chart.selectAll("g.layer1 g.county title")[0][1].innerHTML, "");
        },
        'correct color filling should be set [county]': function(chart) {
            assert.equal(chart.selectAll("g.layer1 g.county path")[0][1].getAttribute("fill"), "white");
        },
        'correct state boundary should be rendered [county]': function(chart) {
            assert.equal(chart.selectAll("g.layer1 g.county path")[0][1].getAttribute("d"), "M131.19348249532786,331.158393614812L134.96890954443046,330.37917634921996L133.88913955606318,325.4363177123538L152.64962091501462,320.5600780855698L160.45728875768884,347.10282901763475L158.06718403819784,351.9017106061042L155.04157973354427,353.5040635871427L150.6555344346686,362.3245894815043L150.38361579972084,357.9607017874404L142.9669142785855,360.34022141152315L139.68878636515288,356.5305270343025L137.81402062165043,358.3232381108978L129.55454916848112,361.03970849762686L130.70892401224123,367.3019528379437L134.05993594430535,369.50516128525805L128.53213890120082,370.28728091558503L121.73420032908871,371.2615742490283L119.73327037945222,375.2428423856673L116.3612100616881,375.78356435845217L115.8855934123893,379.48528537322454L113.09005261057388,379.8580992731016L115.58389710823974,384.67054314327487L113.43023064930466,389.5940776904407L113.90836230854785,394.1137969187375L110.62442844056342,397.21876016250303L94.36525329352175,398.34691224111776L87.1641399364873,397.66453866618014L83.60211149160186,399.50780328972644L77.36596470374718,399.51706457585345L74.9088762742444,396.7829139076556L75.97652856642367,388.34093984198165L76.7866610875326,382.83067647369575L81.3907054432508,380.1432220701677L80.20067355768676,377.4461769441054L80.09802522357364,370.1550384615012L81.87179153566697,368.3132371793898L81.7603828078963,362.0074894997733L81.73276958174174,357.4832740029883L84.39838510538878,355.73734184184184L88.93327086559063,355.57293734302436L88.8403228448861,351.9136076350776L98.70653234516958,353.20155133192816L98.72884703790798,350.4494738989058L104.07014737232032,348.4875903827698L103.88966329401892,343.8608556442444L101.36023362342854,343.0996266491819L101.31771046875105,339.49994527566724L98.53564918942396,337.8811219128646L98.56681109628815,335.53933807857004Z");
        },
        teardown: function(topic) {
            resetAllFilters();
            resetBody();
        }
    }
});

suite.addBatch({
    'filter and highlight': {
        topic: function () {
            var chart = buildChart("choropleth-chart-with-filter");
            chart.filter("Colorado");
            chart.redraw();
            return chart;
        },
        'correct color should be set [California]': function(chart) {
            assert.equal(chart.selectAll("g.layer0 g.state")[0][4].getAttribute("class"), "state california deselected");
        },
        'correct color should be set [Colorado]': function(chart) {
            assert.equal(chart.selectAll("g.layer0 g.state")[0][5].getAttribute("class"), "state colorado selected");
        },
        teardown: function(topic) {
            resetAllFilters();
            resetBody();
        }
    }
});


suite.export(module);


